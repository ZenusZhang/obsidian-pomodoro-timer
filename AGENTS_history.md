# 第一轮的需求
## 需求1
番茄钟的计时器ui上有一个数字，之前，我们对点击数字加了一个功能，用来设置当前番茄钟的时间。
但这个功能的逻辑有些问题。
现在的逻辑是：
1. 在番茄钟正在计时的期间，设置这个时间会直接改变它的倒计时进度。
2. 在番茄钟开始之前修改这个时间，然后开始一个番茄，它仍然会按照设置中的时间来倒计时。
我想要修改的逻辑是：
1. 在番茄钟正在计时的期间，不能点击这个时间。
2. 在番茄钟开始之前修改这个时间，相当于在设置中修改番茄钟的工作时间。

## 需求2
在番茄钟开始时，会有一个鼓励用户记录当前番茄要做的事的窗口，以及可能的记录erv的窗口（如果Reward Value Record在设置中被打开的话）.
我需要的功能是，在最少一个输入框没有被填写的时候，用户点击跳过会再弹出一个对话框类似于确定是否跳过的。

## 需求3
对于reward value Record的功能，记录的时间应该是用户完成填写的时间。
并且，下一次reward value的提醒应该从当前用户填写结束时开始。

## 需求4
复用Reward Value Record(RVR)的代码
!!!IMPORTANT!!!: 一定要复用RVR的逻辑。
在设置里增加一个新的选项：Energe Level Record (ELR). 
基本逻辑是一样的，共用timer， 我们可以把这个timer叫做random timer。
每次记录的逻辑也是类似的：
1. 在一个番茄开始时，弹出的窗口应该有三个输入框（如果R. V. R.与 R. E. L同时被设置的话。）.
分别需要用户填写当前番茄的“内容”，“愉悦感”，“当前的电量”, 这一步需要增加的只有当前的电量这一栏。
提醒词应该是"描述你当前的电量🔋(0~10分)"
2. 把这个ELR的值新建一行,我们讨论中称它为"电量行"，以🔋开头, 记录第一个ELR，同时也需要记录当前距离番茄开始过了多少min(第一个是0)。
3. 开始random timer, "电量行"的更新逻辑与"ARV"的相同。
4. 在番茄钟结束的时候，并不用计算AVG 🔋.

## 需求4.1
记录格式的调整：
在每个番茄的start和end被记录时，不再以"- "开头，但中间自动生成的信息，比如ELR， RVR应该以"- "开头。
AVG ARV不再单独一行被记录，而是应该记录在end的那条记录中。

# 第一轮的修改
- 2025-11-20 Codex: 在本轮中已完成对需求1～4.1的梳理，写入下列要点以便后续开发参照：
  - 需求1：计时中禁用番茄钟时间输入，未开始时更新输入应等同于调整设置里的工作时长。
  - 需求2：在任务描述或RVR输入仍为空时点击“跳过”需要再弹出确认对话框。
  - 需求3：RVR记录时间应取用户完成填写的时刻，下一次提醒从该时间重新计时。
  - 需求4：新增ELR设置项并沿用RVR的random timer逻辑，番茄开始弹窗增加电量输入和🔋记录，不计算平均值。
  - 需求4.1：番茄的start/end行不再以“- ”开头，自动生成的记录继续使用“- ”前缀；AVG ARV并入end记录。


# 第二轮的需求
1. 在Break的计时过程中，如果点击了reset（一个转圈的按钮），应该自动把当前的番茄状态设置成WORK。
